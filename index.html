<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rider Hub - Multi-Company</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --grab-green: #00B14F;
            --lineman-mint: #00B4A9;
            --accent-orange: #FF6B00;
            --dark-text: #2C3E50;
            --light-grey-bg: #F7F9FA;
            --white: #FFFFFF;
            --danger-red: #E74C3C;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Kanit', sans-serif;
            background-color: var(--light-grey-bg);
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }
        
        .container {
            background: var(--white);
            padding: 20px;
            border-radius: 25px;
            box-shadow: 0 10px B30px var(--shadow-color);
            text-align: center;
            max-width: 420px;
            width: 100%;
            margin: 20px auto;
            border: 1px solid #e0e0e0;
        }
        
        .header {
            margin-bottom: 20px;
        }
        
        .title {
            font-size: 26px;
            color: var(--dark-text);
            margin-bottom: 5px;
            font-weight: 700;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .counter-display {
            background: linear-gradient(135deg, #485461 0%, #28313b 100%);
            color: white;
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .counter-label {
            font-size: 16px;
            margin-bottom: 5px;
            opacity: 0.8;
        }
        
        .counter-number {
            font-size: 48px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            line-height: 1.1;
        }

        .individual-counters {
            display: flex;
            justify-content: space-around;
            margin-bottom: 25px;
            padding: 15px 0;
            background: #f1f2f6;
            border-radius: 15px;
        }

        .counter-item {
            text-align: center;
        }

        .counter-item-label {
            font-size: 14px;
            font-weight: 600;
            color: #7f8c8d;
        }

        .counter-item-number {
            font-size: 28px;
            font-weight: 700;
            line-height: 1.2;
        }
        #lineman-count { color: var(--lineman-mint); }
        #grab-count { color: var(--grab-green); }
        
        .buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            color: white;
            font-family: 'Kanit', sans-serif;
        }

        .btn:hover { transform: translateY(-3px); }
        .btn:active { transform: translateY(-1px); }

        .company-buttons {
            display: flex;
            gap: 15px;
        }
        .company-buttons .btn {
            flex: 1;
            font-size: 20px;
            padding: 20px 10px;
        }

        .btn-lineman {
            background: linear-gradient(135deg, var(--lineman-mint) 0%, #00DBCB 100%);
            box-shadow: 0 8px 20px rgba(0, 180, 169, 0.3);
        }
        .btn-lineman:hover { box-shadow: 0 12px 25px rgba(0, 180, 169, 0.4); }

        .btn-grab {
            background: linear-gradient(135deg, var(--grab-green) 0%, #00D26A 100%);
            box-shadow: 0 8px 20px rgba(0, 177, 79, 0.3);
        }
        .btn-grab:hover { box-shadow: 0 12px 25px rgba(0, 177, 79, 0.4); }

        .btn-reset {
            background: #bdc3c7;
            color: var(--dark-text);
            box-shadow: 0 6px 15px rgba(189, 195, 199, 0.4);
        }
        .btn-reset:hover { background: #a4acb1; }
        
        .stats {
            background: var(--light-grey-bg);
            padding: 20px;
            border-radius: 20px;
        }
        
        /* --- Other styles remain the same --- */
        .stats-title{font-size:18px;color:var(--dark-text);margin-bottom:15px;font-weight:600}.goal-setting{display:flex;gap:10px;margin-bottom:20px;align-items:center}#goalInput{flex:1;padding:14px;border:2px solid #dfe6e9;border-radius:12px;font-size:16px;text-align:center;outline:0;transition:all .3s;background:var(--white);font-family:'Kanit',sans-serif}#goalInput:focus{border-color:var(--grab-green);transform:scale(1.02)}.btn-set-goal{padding:14px 18px;background:var(--dark-text);color:white;border-radius:12px;font-size:14px}.btn-set-goal:hover{background:#4a637b}.goal-text{font-size:16px;color:#7f8c8d;margin-bottom:10px}.goal-text strong{font-size:20px;color:var(--dark-text);font-weight:700}.progress-bar{background:#dfe6e9;height:16px;border-radius:10px;overflow:hidden;margin-bottom:10px}.progress-fill{height:100%;background:linear-gradient(90deg,#FFB347 0%,var(--accent-orange) 100%);transition:width .8s cubic-bezier(.4,0,.2,1);border-radius:10px}.progress-fill.complete{background:linear-gradient(90deg,#56ab2f 0%,var(--grab-green) 100%);animation:progressGlow 1.5s ease-in-out infinite alternate}@keyframes progressGlow{from{box-shadow:0 0 5px rgba(86,171,47,.5)}to{box-shadow:0 0 15px rgba(86,171,47,.8)}}.goal-status{font-size:16px;color:#7f8c8d;font-weight:500}.goal-status.success{color:var(--grab-green);font-weight:700}.last-updated{color:#95a5a6;font-size:12px;margin-top:20px}.success-animation{animation:pulse .5s ease-in-out}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.03)}100%{transform:scale(1)}}.celebration{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);font-size:60px;pointer-events:none;animation:celebrate 1s ease-out forwards;z-index:1000}@keyframes celebrate{0%{opacity:0;transform:translate(-50%,-50%) scale(.5)}50%{opacity:1;transform:translate(-50%,-50%) scale(1.2)}100%{opacity:0;transform:translate(-50%,-50%) scale(1.5)}}@media (max-width:480px){body{padding:5px}.container{padding:15px;margin:5px}.title{font-size:22px}.counter-number{font-size:42px}.btn-reset{padding:16px;font-size:16px}}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">üõµ Rider Hub</h1>
            <p class="subtitle">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</p>
        </div>
        
        <div class="counter-display" id="counterDisplay">
            <div class="counter-label">‡∏£‡∏ß‡∏°‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
            <div class="counter-number" id="counterNumber">0</div>
        </div>

        <div class="individual-counters">
            <div class="counter-item">
                <div class="counter-item-label">LINEMAN</div>
                <div class="counter-item-number" id="lineman-count">0</div>
            </div>
            <div class="counter-item">
                <div class="counter-item-label">GRAB</div>
                <div class="counter-item-number" id="grab-count">0</div>
            </div>
        </div>
        
        <div class="buttons">
            <div class="company-buttons">
                <button class="btn btn-lineman" onclick="addOrder('lineman')">
                    LINEMAN +1
                </button>
                <button class="btn btn-grab" onclick="addOrder('grab')">
                    GRAB +1
                </button>
            </div>
            <button class="btn btn-reset" onclick="resetCounter()">
                üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            </button>
        </div>
        
        <div class="stats">
            <div class="stats-title">üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</div>
            <div class="goal-setting">
                <input type="number" id="goalInput" placeholder="‡πÉ‡∏™‡πà‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢" min="1" max="999" value="20">
                <button class="btn-set-goal btn" onclick="setGoal()">‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤</button>
            </div>
            <div class="goal-progress">
                <div class="goal-text">
                    ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: <strong><span id="currentGoal">20</span></strong> ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                </div>
                <div class="goal-status" id="goalStatus">
                    ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å 20
                </div>
            </div>
        </div>
        
        <div class="last-updated" id="lastUpdated">
            ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: -
        </div>
    </div>

    <script>
        const initialData = {
            // ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏¢
            counts: {
                total: 0,
                lineman: 0,
                grab: 0
            },
            lastDate: new Date().toDateString(),
            dailyGoal: 20
        };
        let deliveryData = JSON.parse(JSON.stringify(initialData));

        function loadData() {
            try {
                const saved = localStorage.getItem('riderDeliveryData');
                if (saved) {
                    const parsedData = JSON.parse(saved);
                    const today = new Date().toDateString();
                    
                    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡πà‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡∏∂‡πâ‡∏ô‡∏ß‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà
                    if (parsedData.lastDate !== today) {
                        parsedData.counts = { total: 0, lineman: 0, grab: 0 };
                        parsedData.lastDate = today;
                    }

                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
                    if (!parsedData.counts) {
                        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤ ‡πÉ‡∏´‡πâ‡πÅ‡∏õ‡∏•‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á
                        parsedData.counts = { total: parsedData.today || 0, lineman: 0, grab: 0 };
                        delete parsedData.today; // ‡∏•‡∏ö property ‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏¥‡πâ‡∏á
                    }
                    
                    deliveryData = parsedData;
                }
            } catch (error) {
                console.error('Error loading data:', error);
                // ‡∏´‡∏≤‡∏Å error ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
                deliveryData = JSON.parse(JSON.stringify(initialData));
            }
            updateDisplay();
        }

        function saveData() {
            try {
                localStorage.setItem('riderDeliveryData', JSON.stringify(deliveryData));
            } catch (error) {
                console.error('Error saving data:', error);
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
        function addOrder(company) {
            if (deliveryData.counts.hasOwnProperty(company)) {
                deliveryData.counts[company]++;
                deliveryData.counts.total++;

                // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
                handleOrderAdded();
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ animation ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        function handleOrderAdded() {
            // ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
            if (deliveryData.counts.total === deliveryData.dailyGoal) {
                setTimeout(() => alert(`üèÜ ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!`), 500);
            }
            
            // Celebration ‡∏ó‡∏∏‡∏Å‡πÜ 10 ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
            if (deliveryData.counts.total > 0 && deliveryData.counts.total % 10 === 0) {
                setTimeout(() => showCelebration('üéâ'), 200);
            }
            
            // Animation
            const display = document.getElementById('counterDisplay');
            display.classList.add('success-animation');
            setTimeout(() => display.classList.remove('success-animation'), 500);
            
            updateDisplay();
            saveData();
        }

        function resetCounter() {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô 0 ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                deliveryData.counts = { total: 0, lineman: 0, grab: 0 };
                updateDisplay();
                saveData();
                showCelebration('üîÑ');
            }
        }

        function setGoal() {
            const goalInput = document.getElementById('goalInput');
            const newGoal = parseInt(goalInput.value);
            if (newGoal && newGoal > 0 && newGoal <= 999) {
                deliveryData.dailyGoal = newGoal;
                showCelebration('üéØ');
                updateDisplay();
                saveData();
            } else {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 1-999');
            }
        }

        function updateDisplay() {
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°
            document.getElementById('counterNumber').textContent = deliveryData.counts.total;

            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏¢‡∏≠‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡∏¢
            document.getElementById('lineman-count').textContent = deliveryData.counts.lineman;
            document.getElementById('grab-count').textContent = deliveryData.counts.grab;
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
            const goal = deliveryData.dailyGoal;
            const total = deliveryData.counts.total;
            document.getElementById('currentGoal').textContent = goal;
            document.getElementById('goalInput').value = goal;
            
            const progress = Math.min((total / goal) * 100, 100);
            const progressFill = document.getElementById('progressFill');
            const goalStatus = document.getElementById('goalStatus');
            const remaining = Math.max(0, goal - total);
            
            progressFill.style.width = progress + '%';
            
            if (total >= goal) {
                progressFill.classList.add('complete');
                goalStatus.innerHTML = 'üéâ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ï‡∏≤‡∏°‡πÄ‡∏õ‡πâ‡∏≤!';
                goalStatus.classList.add('success');
            } else {
                progressFill.classList.remove('complete');
                goalStatus.innerHTML = `‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å <strong>${remaining}</strong>`;
                goalStatus.classList.remove('success');
            }
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit' });
            document.getElementById('lastUpdated').textContent = `‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ${timeString} ‡∏ô.`;
        }

        function showCelebration(emoji = '‚ú®') {
            const celebration = document.createElement('div');
            celebration.className = 'celebration';
            celebration.textContent = emoji;
            document.body.appendChild(celebration);
            setTimeout(() => document.body.removeChild(celebration), 1000);
        }

        window.onload = function() {
            loadData();
            setInterval(saveData, 30000); // Auto-save
        };
    </script>
</body>
</html>
